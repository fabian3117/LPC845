/*******************************************************************************************************************************//**
 *
 * @file		systic.cpp
 * @brief		Driver del Systick LPC 845
 * @date		29 jun. 2022
 * @author		Gonzalez Federico
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include "systic.h"
#include "LPC845.h"
#include "swhandler.h"

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/



/***********************************************************************************************************************************
 *** IMPLEMENTACION DE LOS METODODS DE LA CLASE
 **********************************************************************************************************************************/

void SysTick_Handler(void)
{
	for( auto p:g_swhandler)
		p->SWhandler();
}

void systick_Inicializar( uint32_t tiempo )
{
//	SysTick->RELOAD = (FREQ_PRINCIPAL / tiempo ) - 1;
	// lo paso en ms
	SysTick->RELOAD = (FREQ_PRINCIPAL / 1000 * tiempo ) - 1;
	SysTick->CURR = 0;
	SysTick->CTRL = 7;
}

